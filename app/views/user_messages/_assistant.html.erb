<%# app/views/user_messages/_assistant.html.erb %>

<% text = user_message.ai_message&.content&.dig("text").to_s %>
<% word_count = text.scan(/\S+/).size %>

<div id="assistant_user_message_<%= user_message.id %>">
  <div class="message message-assistant message-assistant--handoff">
    <div class="message-bubble">
      <div class="message-label">Assistant</div>
      <div class="message-text">
        <p>Output generated in the right pane.</p>
        <p class="muted">
          Review and edit the full result on the right side.
          <% if word_count.positive? %>
            Generated length: <%= number_with_delimiter(word_count) %> words.
          <% end %>
        </p>
      </div>
    </div>
  </div>
</div>
