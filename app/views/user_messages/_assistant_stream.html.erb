<%# app/views/user_messages/_assistant_stream.html.erb %>

<% has_progress = accumulated.to_s.strip.present? %>
<% confirmation = accumulated.to_s.strip.presence || "Updating..." %>

<div id="assistant_user_message_<%= user_message.id %>">
  <div class="message message-assistant message-assistant--handoff is-streaming">
    <div class="message-bubble" role="status" aria-live="polite">
      <div class="message-text">
        <p><%= confirmation %></p>
        <p class="muted"><%= has_progress ? "Generating output..." : "Waiting for execution..." %></p>
      </div>
      <div class="assistant-waiting-indicator" aria-hidden="true">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </div>
</div>
