<%= turbo_stream_from [@company, :ai_usage] %>

<section class="container py-4" data-controller="admin-live-status">
  <div class="admin-ai-usage__header">
    <div>
      <h1 style="margin-bottom:4px;">AI Usage & Cost</h1>
      <p class="muted" style="margin:0;">Company: <strong><%= @company.name %></strong></p>
    </div>
    <div id="admin_ai_usage_live_status"
         data-admin-live-status-target="status"
         class="admin-live-status is-live">
      <span class="admin-live-status__dot"
            aria-hidden="true"></span>
      <span class="admin-live-status__spinner"
            aria-hidden="true"
            data-admin-live-status-target="spinner"></span>
      <span class="admin-live-status__label"
            data-admin-live-status-target="label">Live</span>
    </div>
  </div>

  <div id="admin_ai_usage_report" style="margin-top:14px;">
    <%= render partial: "admin/ai_usage/report", locals: {
      company: @company,
      totals: @totals,
      requests: @requests,
      run_rows: @run_rows,
      chat_rows: @chat_rows
    } %>
  </div>
</section>
